---

title: Window ops


keywords: fastai
sidebar: home_sidebar

summary: "Naive and fast implementations of common window operations."
description: "Naive and fast implementations of common window operations."
nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This library is intended to be used as an alternative to <code>pd.Series.rolling</code> and <code>pd.Series.expanding</code> to gain a speedup by using numba optimized functions operating on numpy arrays and avoiding input checks. There are also online classes for more efficient updates of window statistics.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install window-ops</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For a transformations <code>n_samples</code> -&gt; <code>n_samples</code> you can use <code>{[seasonal_](rolling|expanding)}_{(mean|max|min|std)}</code> on an array.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Benchmarks">Benchmarks<a class="anchor-link" href="#Benchmarks"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1_000</span>  <span class="c1"># array size</span>
<span class="n">window_size</span> <span class="o">=</span> <span class="mi">8</span>  <span class="c1"># for rolling operations</span>
<span class="n">season_length</span> <span class="o">=</span> <span class="mi">7</span>  <span class="c1"># for seasonal operations</span>
<span class="n">execute_times</span> <span class="o">=</span> <span class="mi">1_000</span> <span class="c1"># number of times each function will be executed</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Average times in milliseconds.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">display_dataframe</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea output_execute_result">
<table>
<thead><tr>
<th style="text-align:left"></th>
<th style="text-align:right">window_ops</th>
<th style="text-align:right">pandas</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">rolling_mean</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0.33</td>
</tr>
<tr>
<td style="text-align:left">rolling_max</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.37</td>
</tr>
<tr>
<td style="text-align:left">rolling_min</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.32</td>
</tr>
<tr>
<td style="text-align:left">rolling_std</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.33</td>
</tr>
<tr>
<td style="text-align:left">expanding_mean</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0.31</td>
</tr>
<tr>
<td style="text-align:left">expanding_max</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.32</td>
</tr>
<tr>
<td style="text-align:left">expanding_min</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.32</td>
</tr>
<tr>
<td style="text-align:left">expanding_std</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">0.33</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_mean</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">3.78</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_max</td>
<td style="text-align:right">0.03</td>
<td style="text-align:right">3.85</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_min</td>
<td style="text-align:right">0.02</td>
<td style="text-align:right">3.8</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_std</td>
<td style="text-align:right">0.02</td>
<td style="text-align:right">3.93</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_mean</td>
<td style="text-align:right">0.01</td>
<td style="text-align:right">3.73</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_max</td>
<td style="text-align:right">0.24</td>
<td style="text-align:right">3.86</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_min</td>
<td style="text-align:right">0.22</td>
<td style="text-align:right">3.83</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_std</td>
<td style="text-align:right">0.02</td>
<td style="text-align:right">3.86</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">display_dataframe</span><span class="p">(</span><span class="n">speedups</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea output_execute_result">
<table>
<thead><tr>
<th style="text-align:left"></th>
<th style="text-align:right">times faster</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">rolling_mean</td>
<td style="text-align:right">122.05</td>
</tr>
<tr>
<td style="text-align:left">rolling_max</td>
<td style="text-align:right">29.85</td>
</tr>
<tr>
<td style="text-align:left">rolling_min</td>
<td style="text-align:right">23.45</td>
</tr>
<tr>
<td style="text-align:left">rolling_std</td>
<td style="text-align:right">64.31</td>
</tr>
<tr>
<td style="text-align:left">expanding_mean</td>
<td style="text-align:right">104.72</td>
</tr>
<tr>
<td style="text-align:left">expanding_max</td>
<td style="text-align:right">22.17</td>
</tr>
<tr>
<td style="text-align:left">expanding_min</td>
<td style="text-align:right">23.35</td>
</tr>
<tr>
<td style="text-align:left">expanding_std</td>
<td style="text-align:right">40.69</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_mean</td>
<td style="text-align:right">275.68</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_max</td>
<td style="text-align:right">148.73</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_min</td>
<td style="text-align:right">154.22</td>
</tr>
<tr>
<td style="text-align:left">seasonal_rolling_std</td>
<td style="text-align:right">229.91</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_mean</td>
<td style="text-align:right">267.48</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_max</td>
<td style="text-align:right">16.25</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_min</td>
<td style="text-align:right">17.34</td>
</tr>
<tr>
<td style="text-align:left">seasonal_expanding_std</td>
<td style="text-align:right">212.16</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

